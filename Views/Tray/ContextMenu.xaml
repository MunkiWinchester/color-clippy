<UserControl
    x:Class="ColorClippy.Views.Tray.ContextMenu"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Services="clr-namespace:WpfUtility.Services;assembly=WpfUtility"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dataObjects="clr-namespace:ColorClippy.DataObjects"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewModels="clr-namespace:ColorClippy.ViewModels"
    mc:Ignorable="d">
    <UserControl.DataContext>
        <viewModels:ContextViewModel />
    </UserControl.DataContext>
    <UserControl.Resources>
        <ResourceDictionary>
            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
            <Services:NegatedBooleanToVisibilityConverter x:Key="NegatedBooleanToVisibilityConverter" />
            <Style x:Key="MenuItemStyle" TargetType="{x:Type MenuItem}">
                <Setter Property="VerticalContentAlignment" Value="Center" />
                <Setter Property="HorizontalContentAlignment" Value="Left" />
                <Setter Property="Margin" Value="2" />
            </Style>
            <Style x:Key="LabelBlockStyle" TargetType="{x:Type TextBlock}">
                <Setter Property="HorizontalAlignment" Value="Left" />
            </Style>
            <DataTemplate DataType="{x:Type dataObjects:ColorItem}">
                <StackPanel Orientation="Horizontal">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Rectangle Fill="{Binding Path=Color}" />
                        <Label Content="{Binding Path=Name}" />
                    </Grid>
                    <!--  the other controls with bindings  -->
                </StackPanel>
            </DataTemplate>
            <DataTemplate DataType="{x:Type dataObjects:ColorCollection}">
                <StackPanel Orientation="Horizontal">
                    <Button
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Content="{Binding Path=Name}">
                        <Button.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Menu item 1" />
                                <MenuItem Header="Menu item 2" />
                                <Separator />
                                <MenuItem Header="Menu item 3" />
                            </ContextMenu>
                        </Button.ContextMenu>
                    </Button>
                    <!--  the other controls with bindings  -->
                    <Label Content="{Binding Path=Name}" />
                    <Menu>
                        <ItemsControl
                            Grid.Row="0"
                            Grid.Column="0"
                            ItemsSource="{Binding Path=Items}" />
                    </Menu>
                </StackPanel>
            </DataTemplate>
        </ResourceDictionary>
    </UserControl.Resources>
    <Border
        Background="PapayaWhip"
        BorderBrush="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=AccentColor}"
        BorderThickness="2"
        Opacity="0.825">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>
            <ItemsControl
                Grid.Row="0"
                Grid.Column="0"
                ItemsSource="{Binding MySearchItems}" />
            <Separator
                Grid.Row="1"
                Grid.Column="0"
                Background="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=AccentColor}" />
            <MenuItem
                Grid.Row="2"
                Grid.Column="0"
                Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=CloseCommand}"
                Style="{StaticResource MenuItemStyle}">
                <MenuItem.Header>
                    <TextBlock Style="{StaticResource LabelBlockStyle}" Text="Close" />
                </MenuItem.Header>
            </MenuItem>
        </Grid>
    </Border>
</UserControl>
